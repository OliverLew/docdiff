<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="Export document diffs as PDF">
<meta name="author" content="Lu Xu">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABlBMVEUAAP//AADF+ovTAAAAMklEQVQ4y2NgGITg/38IJg4wUWodxQYwIpyNVxkjzVwwfAIRh2cYGP4T0MzIxDAKKAYAFPAMBzBBVLYAAAAASUVORK5CYII=" rel="icon" type="image/x-icon" />
<style>
p.sample {
    padding: 2px;
    border: 1px solid grey;
    font-size: small;
}
input[type=file] {
    padding: 8px;
    border: 1px solid grey;
    border-radius: 8px;
}
input {
    padding: 4px;
}
</style>
<script>
function cacheInput() {
    let boxes = document.getElementsByClassName("prefs");
    for (let i = 0; i < boxes.length; i++) {
        localStorage.setItem(boxes[i].id, boxes[i].checked);
    }
}

function resetInput() {
    let boxes = document.getElementsByClassName("prefs");
    for (let i = 0; i < boxes.length; i++) {
        localStorage.removeItem(boxes[i].id);
    }
}

window.onload = function() {
    let boxes = document.getElementsByClassName("prefs");
    for (let i = 0; i < boxes.length; i++) {
        let v = localStorage.getItem(boxes[i].id);
        if (v == "true") {
            boxes[i].checked = true;
        } else if (v == "false") {
            boxes[i].checked = false;
        }
    }
}
</script>
</head>
<h1>文档对比工具</h1>
<form method="post" action="result" target="_blank" enctype="multipart/form-data">
    请上传两份<b>纯文本</b>文档（可以拖拽文件到下方文件选择框）：
    <p> 旧版本：<input type="file" name="old" accept="text/plain" required> </p>
    <p> 新版本：<input type="file" name="new" accept="text/plain" required> </p>
    <p>
        标记方式：
        <input type="checkbox" class="prefs" id='fg' name='fg' checked onchange="cacheInput()">
        <label for='fg'>红色/蓝色字体</label>
        <input type="checkbox" class="prefs" id='bg' name='bg' onchange="cacheInput()">
        <label for='bg'>黄色背景</label>
        <input type="checkbox" class="prefs" id='ul' name='ul' onchange="cacheInput()">
        <label for='ul'>下划线</label>
    </p>
    <p>
        <input type="submit" value="生成对比文档">
        <input type="reset" value="重置所有选项！！" onclick="resetInput()">
    </p>
</form>
<div>
    <h3>说明</h3>
    <p>
        自动对比两份纯文本文档，以不同颜色高亮形式输出。
        增删部分分两行显示，无变化部分仅显示一行原文。
    </p>
    <p>
        为方便修改，结果可复制粘贴至Word等软件中，颜色将会被保留。
    </p>
    <h3>效果</h3>
    <p>旧版本：</p>
    <p class="sample">
        Detectability of Black Hole Binaries with Gaia: Dependence on Binary Evolution Models<br>
        “盖亚”探测黑洞双星：双星演化模型的依赖
    </p>
    <p>新版本：</p>
    <p class="sample">
        来源：Shikauchi2022ApJ928.13<br><br>
        Detectability of Black Hole Binaries with Gaia: Dependence on Binary Evolution Models<br>
        “盖亚”对黑洞双星的可探测性：双星演化模型的影响
    </p>
    <p>对比版本：</p>
    <p class="sample">
        <span style="color:blue">来源：Shikauchi2022ApJ928.13</span><br><br>
        Detectability of Black Hole Binaries with Gaia: Dependence on Binary Evolution Models<br>
        “盖亚”<span style="color:red">探测</span>黑洞双星：双星演化模型的<span style="color:red">依赖</span><br>
        “盖亚”<span style="color:blue">对</span>黑洞双星<span style="color:blue">的可探测性</span>：双星演化模型的<span style="color:blue">影响</span>
    </p>
</div>
</html>
